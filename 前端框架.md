## Vue使用

### Vue基本使用

1. 指令，插值

   插值，表达式

   指定，动态属性

   v-html: 会有xss风险，会覆盖子组件

2. computed和watch

   computed有缓存，data不变则不会重新计算，提高运算的性能

   watch默认是浅监听，只会监听对象第一层的数据变化

   watch如何深度监听?

   watch监听引用类型，拿不到old value

   ```javascript
   export default {
       data() {
           return {
               name: '夏衣旦'
               info: {
               	city: '北京'
           	}
           }
       },
       watch() {
       	name(oldVal, val) {
               console.log('watch name', oldVal, val) // 值类型，可以正常拿到oldVal和val
           },
           info: {
               handler(oldVal, val) {
                   console.log('watch info', oldVal, val) // 引用类型，拿不到oldVal，因为指针相同，此时已经指向val 
                   // 注意：引用类型赋值是指针赋值的关系
               },
               deep: true // 深度监听
           }
   	}
   }
   ```

3. class和style

   使用动态属性 :class :style class可以是一个对象或数组的写法, style也可以是对象的写法

   style要用驼峰式写法

4. 条件渲染

   v-if v-else的用法，可使用变量，也可以使用===表达式

   v-if和v-show的区别?

   v-if和v-show的使用场景?

5. 循环列表渲染

   如何遍历对象? v-for

   ```html
   // 遍历数组的方式
   <ul>
   	<li v-for="(item, index) in listArr" :key="item.id">
   		{{index}}-{{item.id}}-{{item.title}}
   	</li>
   </ul>
   // 遍历对象的方式
   <ul>
   	<li v-for="(val, key, index) in listObj" :key="key">
   		{{index}}-{{key}}-{{val.title}}
   	</li>
   </ul>
   ```

   key的重要性，key不能乱写（如random或者index)，需要写一个和业务相关联的信息

   **v-for和v-if不能一起使用**

6. 事件

   event参数，自定义参数

   [观察]事件被绑定到哪里？

   ​	1. event是原生的

   ​	2. 事件被挂载到当前元素

   事件修饰符

   ```html
   <!-- 阻止单击事件继续传播 -->
   <a v-on:click.stop="doThis"></a>
   
   <!-- 提交事件不再重载页面 -->
   <form v-on:submit.prevent="onSubmit"></form>
   
   <!-- 修饰符可以串联 -->
   <a v-on:click.stop.prevent="doThat"></a>
   
   <!-- 只有修饰符 -->
   <form v-on:submit.prevent></form>
   
   <!-- 添加事件监听器时使用事件捕获模式 -->
   <!-- 即内部元素触发的事件先在此处理，然后才交由内部元素进行处理 -->
   <div v-on:click.capture="doThis">...</div>
   
   <!-- 只当在 event.target 是当前元素自身时触发处理函数 -->
   <!-- 即事件不是从内部元素触发的 -->
   <div v-on:click.self="doThat">...</div>
   ```

   按键修饰符

   ```html
   <!-- 即使 Alt 或 Shift 被一同按下时也会触发 -->
   <button @click.ctrl="onClick">A</button>
   
   <!-- 有且只有 Ctrl 被按下的时候才触发 -->
   <button @click.ctrl.exact="onClickExact">A</button>
   
   <!-- 没有任何系统修饰符被按下的时候才触发 -->
   <button @click.exact="onClick">A</button>
   ```

7. 表单

   v-model

   常见表单项 textarea checkbox radio select

   修饰符 lazy number trim

   ​	.trim 截取前后的空格

   ​	.lazy 相当于防抖的效果，等输入完的时候才会变化

   ​	.number 数字

### Vue组件使用

1. props和$emit (父子组件的通讯方式)

2. 组件间通讯-自定义事件 (兄弟组件的通讯)

   ```javascript
   import event from './event'
   
   // 组件A
   methods: {
       addTitle() {
           // 调用父组件的事件
       	this.$emit('add', this.title)
           // 调用自定义事件 'onAddTitle'
           event.$emit('onAddTitle', this.title)
       }
   }
   
   // 组件B
   mounted() {
       // 绑定自定义事件
       event.$on('onAddTitle', this.addTitleHandler)
   },
   beforeDestroy() {
       // 及时销毁，否则可能造成内存泄漏
       event.$off('onAddTitle', this.addTitleHandler)
   },
   methods: {
       addTitleHandler (title){
   		console.log('on add title : ', title)
   	}
   }
   ```

3. 组件生命周期

4. beforeDestroy() 里面我们会做哪些事情？

   及时的解绑事件，否则会造成内存泄漏

## 面试题

### Vue面试题

1. v-show和v-if的区别
2. 为何v-for中要用key
3. 描述vue组件生命周期（有父子组件的情况下）
4. vue组件如何通讯
5. React真题演练
6. 描述组件渲染和更新的过程
7. 双向数据绑定v-model的实现原理

### React面试题

1. #### 组件之间如何通讯

   父子组件props

   自定义事件

   Redux和Context

2. #### JSX本质是什么

   createElement

   执行返回vnode

3. #### Context是什么，如何应用？

   父组件，向其下所有子孙组件传递信息

   如一些简单的公共信息：主题色，语言等

   复杂的公共信息，请用redux

4. #### shouldComponentUpdate (简称SCU)用途

   性能优化

   配合“不可变值”一起使用，否则会出错

5. #### 描述redux单项数据流

   图解

6. #### setState场景题

   ```javascript
   componentDidMount() {
   	// count初始值为0
   	this.setState({count: this.state.count + 1})
   	console.log('1', this.state.count) // 0
   	this.setState({count: this.state.count + 1})
   	console.log('2', this.state.count) // 0
   	setTimeout(()=>{
   		this.setState({count: this.state.count+1})
   		console.log('3', this.state.count) //2
   	})
   	setTimeout(()=>{
   		this.setState({count: this.state.count+1})
   		console.log('4', this.state.count) //3
   	})
   }
   // setState是异步的，并且会合并1和2的操作
   ```

   

7. #### 什么是纯函数

   返回一个新值，没有副作用（不会“偷偷”修改其他值）

   重点：不可变值

   如 arr1 = arr.slice()

8. #### React组件生命周期

   单组件生命周期

   父子组件生命周期

9. #### React发起ajax应该在哪个生命周期

   同vue

   componentDidMount (DOM已经渲染完的生命周期上)

10. #### 渲染列表，为何使用key

    同vue，必须用key，且不能是index和random

    diff算法中通过tag和key来判断，是否是same node

    减少渲染次数，提升渲染性能

11. #### 函数组件和class组件的区别

    纯函数，输入props，输出JSX

    没有实例，没有生命周期，没有state

    不能扩展其他方法

12. #### 什么是受控组件

    表单的值，受state控制

    需要自行监听onChange，更新state

    对比非受控组件

13. #### 何时使用异步组件

    同vue

    加载大组件

    路由懒加载

14. #### 多个组件有公共逻辑，如何抽离

    高阶组件

    Render Props

    mixin已被React废弃

15. #### redux如何进行异步请求

    使用异步action

    如redux-thunk

16. #### react-router如何配置懒加载

    lazy

    ```javascript
    import React, {Suspense, lazy} from 'react'
    
    const Home = lazy(()=>import('./routes/Home'))
    const About = lazy(()=>import('./routes/About'))
    ```

    

17. #### PureComponent有何区别

    实现了浅比较的shouldComponentUpdate

    优化性能

    但要结合不可变值使用

18. #### React事件和DOM事件的区别

    所有事件挂载到document上

    event不是原生的，是SyntheticEvent合成事件对象

    dispatchEvent

19. #### React性能优化

    1. sss渲染列表时加key
    2. 自定义事件，DOM事件及时销毁
    3. 合理使用异步组件
    4. 减少函数bind this的次数
    5. 合理使用SCU PureComponent和memo
    6. 合理使用Immutable.js
    7. webpack层面的优化
    8. 前端通用的性能优化，如图片懒加载
    9. 使用SSR （服务器端渲染）

20. #### React和Vue的区别

    共同点：

    1. 都支持组件化

    2. 都是数据驱动视图
    3. 都是用v dom操作dom

    不同点：

    1. React使用JSX拥抱JS，Vue使用模板拥抱html (开发认知)
    2. React函数式编程，Vue声明式编程
    3. React更多需要自力更生，Vue把想要的都给你

### 框架综合应用

1. 基于React设计一个todolist （组件结构，redux state数据结构）
2. 基于VUE设计一个购物车 (组件结构，vuex state数据结构)

### Webpack面试题

1. 前端代码为何要进行构建和打包
2. module chunk bundle分别是什么意思？有何区别
3. loader和plugin的区别?
4. webpack如何实现懒加载
5. webpack常见性能优化
6. babel-runtime和babel-polyfill的区别

